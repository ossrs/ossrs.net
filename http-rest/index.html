<!DOCTYPE html>
<html>
<head>
    <title>SRS</title>   
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="../trunk/research/players/css/bootstrap.min.css"/>
    <script type="text/javascript" src="../trunk/research/players/js/jquery-1.12.2.min.js"></script>
    <script type="text/javascript" src="../trunk/research/players/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../trunk/research/players/js/json2.js"></script>
    <script type="text/javascript" src="../trunk/research/players/js/srs.utility.js"></script>
    <script type="text/javascript" src="../trunk/research/players/js/winlin.utility.js"></script>
    <script type="text/javascript">
        function get_url() {
            return $("#url").val();
        }
        function get_req() {
            return $("#req").val();
        }
        function on_res(str) {
            return $("#res").text(str);
        }
        $(function(){
            var query = parse_query_string();
            $("#url").val("http://" + query.hostname + ":1985/api/v1/versions");
            
            $("#btn_get").click(function(){
                var url = get_url();
                var data = get_req();
                const headers = {};
                if ($("#key").val()) headers[$("#key").val()] = $("#value").val();
                $.ajax({
                    type       : "GET",
                    async      : false,
                    headers    : headers,
                    url        : url,
                    contentType: "application/json",
                    data       : data,
                    complete   : function() {
                    },
                    error      : function(ret) {
                        on_res(ret.responseText);
                    },
                    success    : function(ret) {
                        on_res(JSON.stringify(ret));
                    }
                });
            });
            $("#btn_post").click(function(){
                var url = get_url();
                var data = get_req();
                const headers = {};
                if ($("#key").val()) headers[$("#key").val()] = $("#value").val();
                $.ajax({
                    type       : "POST",
                    async      : false,
                    headers    : headers,
                    url        : url,
                    contentType: "application/json",
                    data       : data,
                    complete   : function() {
                    },
                    error      : function(ret) {
                        on_res(ret.responseText);
                    },
                    success    : function(ret) {
                        on_res(JSON.stringify(ret));
                    }
                });
            });
            $("#btn_put").click(function(){
                var url = get_url();
                var data = get_req();
                const headers = {};
                if ($("#key").val()) headers[$("#key").val()] = $("#value").val();
                $.ajax({
                    type       : "PUT",
                    async      : false,
                    headers    : headers,
                    url        : url,
                    contentType: "application/json",
                    data       : data,
                    complete   : function() {
                    },
                    error      : function(ret) {
                        on_res(ret.responseText);
                    },
                    success    : function(ret) {
                        on_res(JSON.stringify(ret));
                    }
                });
            });
            $("#btn_delete").click(function(){
                var url = get_url();
                var data = get_req();
                const headers = {};
                if ($("#key").val()) headers[$("#key").val()] = $("#value").val();
                $.ajax({
                    type       : "DELETE",
                    async      : false,
                    headers    : headers,
                    url        : url,
                    contentType: "application/json",
                    data       : data,
                    complete   : function() {
                    },
                    error      : function(ret) {
                        on_res(ret.responseText);
                    },
                    success    : function(ret) {
                        on_res(JSON.stringify(ret));
                    }
                });
            });
        });
    </script>
</head>
<body>
<img src='//ossrs.net/gif/v1/sls.gif?site=ossrs.net&path=/release/httprest'/>
<div class="container">
    <h1>HTTP methods</h1>
    <div class="form-search">
        <label>URL</label>
        <input id="url" type="text" class="input-medium search-query span6" value="" placeholder="url to do http method...">
        <button id="btn_get" type="button" class="btn"> GET </button>
        <button id="btn_post" type="button" class="btn"> POST </button>
        <button id="btn_put" type="button" class="btn"> PUT </button>
        <button id="btn_delete" type="button" class="btn"> DELETE </button>
    </div>
    <div class="row-fluid">
        <div>
            <legend>Headers</legend>
            <div class="row-fluid">
            <div class="span6">
                <label>Key: </label>
                <input id="key" type="text" class="input-xlarge" value="">
            </div>
            <div class="span6">
                <label>Value: </label>
                <input id="value" type="text" class="input-xlarge" value="">
            </div>
            </div>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span6">
            <div>
                <legend>Request</legend>
                <textarea id="req" rows="8" class="span11"></textarea>
            </div>
        </div>
        <div class="span6">
            <div>
                <legend>Response</legend>
                <textarea id="res" rows="8" class="span11"></textarea>
            </div>
        </div>
    </div>
    <footer class="footer navbar-fixed-bottom">
        <div class="container">
            <p>&copy; 2014 The SRS Project, winlin</p>
        </div>
    </footer>
</div>
